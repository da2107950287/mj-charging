(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["auth"],{"01a8":function(t,e,n){},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"2fef":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._m(1),n("div",{staticClass:"btns"},[n("van-button",{staticClass:"btn",attrs:{block:"",color:"#D4AD6A"},on:{click:t.submit}},[t._v("登录")])],1)])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"img-box"},[n("div",{staticClass:"mgkc-logo"}),n("div",{staticClass:"text"},[t._v("米京快充")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"center"},[n("div",{staticClass:"title"},[t._v("-需要获取如下权限-")]),n("div",{staticClass:"text"},[t._v("昵称.头像")])])}],c=(n("c975"),n("ac1f"),n("841c"),n("1276"),n("2f14")),a={data:function(){return{code:"",deviceId:"",clock:0}},created:function(){var t=this,e=window.location.href.indexOf("?"),n=window.location.href.indexOf("#"),i=window.location.href;-1!==e&&n>e&&(i=window.location.href.substr(0,e)+window.location.href.substr(n,window.location.href.length)+window.location.search,window.location.href=i),this.code=this.$route.query.code,Object(c["b"])(this.code)||this.login(),this.deviceId=this.$route.query.device,Object(c["b"])(this.deviceId)||Object(c["d"])("deviceId",this.deviceId),Object(c["b"])(Object(c["a"])("token"))||this.$http("/userinfo/showUserinfo",{deviceId:Object(c["a"])("deviceId")}).then((function(e){202==e.code&&(t.$cookies.config("30d"),t.$cookies.set("token2",e.data.token),Object(c["d"])("mobile",e.data.mobile),Object(c["d"])("role",e.data.role),Object(c["d"])("token",e.data.token),Object(c["d"])("olId",e.data.olId),t.$router.push("/inCharging"))}))},methods:{login:function(){var t=this;0==this.clock&&(this.clock=1,this.$http("/userinfo/login",{code:this.code,deviceId:Object(c["a"])("deviceId")}).then((function(e){t.clock=0,200==e.code?t.$router.push("/home"):202==e.code?t.$router.push("/inCharging"):t.$toast.fail(e.msg),t.$cookies.config("30d"),t.$cookies.set("token2",e.data.token),Object(c["d"])("token1",e.data.token),Object(c["d"])("role",e.data.role),Object(c["d"])("token",e.data.token),Object(c["d"])("olId",e.data.olId),Object(c["d"])("mobile",e.data.mobile)})))},submit:function(){if(0==this.clock){var t=encodeURIComponent("".concat(window.location.href.split("#")[0],"#/auth"));window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxe839e59a50cd2ce4&redirect_uri=".concat(t,"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")}}}},r=a,d=(n("9a1a"),n("2877")),s=Object(d["a"])(r,i,o,!1,null,"f3ba6e44",null);e["default"]=s.exports},"841c":function(t,e,n){"use strict";var i=n("d784"),o=n("825a"),c=n("1d80"),a=n("129f"),r=n("14c3");i("search",1,(function(t,e,n){return[function(e){var n=c(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,n):new RegExp(e)[t](String(n))},function(t){var i=n(e,t,this);if(i.done)return i.value;var c=o(t),d=String(this),s=c.lastIndex;a(s,0)||(c.lastIndex=0);var u=r(c,d);return a(c.lastIndex,s)||(c.lastIndex=s),null===u?-1:u.index}]}))},"9a1a":function(t,e,n){"use strict";n("01a8")},a640:function(t,e,n){"use strict";var i=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&i((function(){n.call(null,e||function(){throw 1},1)}))}},ae40:function(t,e,n){var i=n("83ab"),o=n("d039"),c=n("5135"),a=Object.defineProperty,r={},d=function(t){throw t};t.exports=function(t,e){if(c(r,t))return r[t];e||(e={});var n=[][t],s=!!c(e,"ACCESSORS")&&e.ACCESSORS,u=c(e,0)?e[0]:d,l=c(e,1)?e[1]:void 0;return r[t]=!!n&&!o((function(){if(s&&!i)return!0;var t={length:-1};s?a(t,1,{enumerable:!0,get:d}):t[1]=1,n.call(t,u,l)}))}},c975:function(t,e,n){"use strict";var i=n("23e7"),o=n("4d64").indexOf,c=n("a640"),a=n("ae40"),r=[].indexOf,d=!!r&&1/[1].indexOf(1,-0)<0,s=c("indexOf"),u=a("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:d||!s||!u},{indexOf:function(t){return d?r.apply(this,arguments)||0:o(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);